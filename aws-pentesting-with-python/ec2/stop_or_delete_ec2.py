#!/usr/bin/env python3

import boto3
import json
import os
import os
import pprint
from sys import version_info
import sys


AWS_REGION = "us-west-1"
EC2_CLIENT = boto3.client('ec2', region_name=AWS_REGION)
INSTANCE_ID = 'i-06a2ac220369ddb08'

# Stopping the instance using stop_instances.

instances = EC2_CLIENT.stop_instances(
	    InstanceIds=[
            INSTANCE_ID,
    ],
)

for instance in instances['StoppingInstances']:
    print(f'Stopping instance "{instance["InstanceId"]}"')
    print(f'Status of instance "{instance["CurrentState"]["Name"]}"')

print(json.dumps(instances, indent=4, sort_keys=True))

def terminating_instances():
    # Terminating the instance using terminate_instances.
    instances = EC2_CLIENT.terminate_instances(
        InstanceIds=[
            INSTANCE_ID,
        ],
    )
    for instance in instances['TerminatingInstances']:
        print(f'Terminating instance "{instance["InstanceId"]}"')
        print(f'Status of instance "{instance["CurrentState"]["Name"]}"')
    print(json.dumps(instances, indent=4, sort_keys=True))

yes = {'yes','y', 'ye', ''}
no = {'no','n'}
print("Do you want to delete instance? (y/n)")
choice = input().lower()
if choice in yes:
   print('Now it is beeing deleted')
   terminating_instances()
elif choice in no:
   print('Successfully stopped')
else:
   sys.stdout.write("Please respond with 'yes' or 'no'")
    