#!/usr/bin/env python3

# get caller identity using boto3 and aws-shell (aws-cli)

import boto3
import json
import sys
import os

# declare env var for aws-shell

AWS_ACCESS_KEY_ID = os.environ["AWS_ACCESS_KEY_ID"]
AWS_SECRET_ACCESS_KEY = os.environ["AWS_SECRET_ACCESS_KEY"]


print("======Getting caller identity======")

data = boto3.client(
    "sts",
    aws_access_key_id=AWS_ACCESS_KEY_ID,
    aws_secret_access_key=AWS_SECRET_ACCESS_KEY,
)

print(json.dumps(data.get_caller_identity(), indent=4, sort_keys=True))
