import boto3
import logging
from datetime import date, datetime
from botocore.exceptions import ClientError
import json
from json_datetime_serializer import json_datetime_serializer
from kms_client import kmsClient

logger = logging.getLogger()
logging.basicConfig(level=logging.INFO,
                    format='%(asctime)s: %(levelname)s: %(message)s')

def getSingleKMS(key_id):
    client = kmsClient()
    response = client.describe_key(KeyId=key_id)
    return response['KeyMetadata']

if __name__ == '__main__':
    KEY_ID = input("Enter the key id: ")
    kms = getSingleKMS(KEY_ID)
    logger.info('Getting information about KMS key...')
    logger.info(
        f'Key Details: {json.dumps(kms, indent=4, default=json_datetime_serializer)}'
    )
    logger.info('Done!')