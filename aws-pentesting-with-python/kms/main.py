#!/usr/bin/env python3

# get acoount authorization detailsusing boto3 and aws-shell (aws-cli)

import boto3
import json
import sys
import os
import pprint
import boto3

# declare env


class KmsCreation:
    
    def isKMSExists(key_name):
        client = boto3.client('kms',
                      aws_access_key_id=' ', 
                      aws_secret_access_key='  ', 
                      region_name='eu-central-1')

        alias_list = client.list_aliases(Limit=999)
        if alias_list['Truncated'] is True:
            alias_list_trun = alias_list['Aliases']
            for alias in alias_list_trun:
                if alias["AliasName"] == "alias/" + key_name:
                    return alias + 'already exists'
            while alias_list['Truncated'] :
                alias_list = client.list_aliases(Limit=999,Marker=alias_list['NextMarker'])
                alias_list_trun = alias_list['Aliases']
                for alias in alias_list_trun:
                    if alias["AliasName"] == "alias/" + key_name:
                        return alias["TargetKeyId"]
        else:
            alias_list= alias_list['Aliases']
            for alias in alias_list:
                if alias["AliasName"] == "alias/" + key_name:
                    return alias['AliasName'] + ' This KMS is already created, now updating it'
                
                
                
    def check():
        if self.isKMSExists(key_name):
            print(self.isKMSExists(key_name))
        else:
            print()